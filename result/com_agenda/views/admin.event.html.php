<?php

	/*
	** Generated by Joomla Admin Generator
	** Author: Le Dinh Thuong
	** Email: navaroiss@gmail.com
	** 
	** Component:  com_agenda
	** View: Render_HTML
	** File: admin.event.html.php
	** Time: Tue, 17 Nov 2009 16:19:09
	*/

	class Render_HTML
	{
		function editRecord($edit, $row, $image_path_from_select = '/images/')
		{
			$editor =& JFactory::getEditor();
			?>
			<form action="index.php" method="post" name="adminForm" enctype="multipart/form-data">
				<div class="col width-60">
					<fieldset class="adminform">
						<legend><?php echo JText::_( 'Details' ); ?></legend>
						<table class="admintable">
							<tr>
<td class="key">
<label for="title">
<?php echo JText::_("Title");?>:</label>
</td>
<td >
<input class="inputbox" type="text" name="event[title]" id="title" size="60" maxlength="255" value="<?php echo $row->title; ?>" />
</td>
</tr>
<tr>
<td class="key">
<label for="date">
<?php echo JText::_("Date");?>:</label>
</td>
<td >
<input class="inputbox" type="text" name="event[date]" id="date" size="60" maxlength="255" value="<?php echo $row->date; ?>" /> <img class="calendar" src="templates/system/images/calendar.png" alt="calendar" onclick="return showCalendar('date', '%Y-%m-%d');" />
</td>
</tr>
<tr>
<td class="key">
<label for="content">
<?php echo JText::_("Content");?>:</label>
</td>
<td >
<?php echo $editor->display("event[content]",$row->content, "550", "150", "60", "10", array("readmore") );?>
</td>
</tr>
<tr>
<td class="key">
<label for="image">
<?php echo JText::_("Image");?>:</label>
</td>
<td ><input type='file' name='event[image]' />
</td>
</tr>
<?php if($row->image!=''){?><tr>
<td class="key">
<label for="delete_image">
<?php echo JText::_("Delete Image");?>:</label>
</td>
<td ><input type="checkbox" name="event[delete_files][image]"/> <a href="<?=JURI::root().'administrator/components/com_agenda/assets/upload/'.$row->image?>">Download</a>
</td>
</tr>
<?php } ?><tr>
<td class="key">
<label for="document">
<?php echo JText::_("Document");?>:</label>
</td>
<td ><input type='file' name='event[document]' />
</td>
</tr>
<?php if($row->document!=''){?><tr>
<td class="key">
<label for="delete_document">
<?php echo JText::_("Delete Document");?>:</label>
</td>
<td ><input type="checkbox" name="event[delete_files][document]"/> <a href="<?=JURI::root().'administrator/components/com_agenda/assets/upload/'.$row->document?>">Download</a>
</td>
</tr>
<?php } ?><tr>
<td class="key">
<label for="icon">
<?php echo JText::_("Icon");?>:</label>
</td>
<td ><?php echo JHTML::_('list.images','event[icon]',$row->icon,'onchange="window.document.imagelib.src=\''.JURI::root().$image_path_from_select.'\'+this.value"',$image_path_from_select);?><br/><img name='imagelib' src='<?php echo JURI::root().$image_path_from_select.$row->icon?>' />
</td>
</tr>
<?php $field["field_name"]="event[catid]"; $field["id"]="id"; $field["name"]="name"; $field["parent"]="parent"?>
<tr>
<td class="key">
<label for="catid">
<?php echo JText::_("Catid");?>:</label>
</td>
<td ><?php echo listCategories($row->catid, $field, "agenda_category");?>
</td>
</tr>

						</table>
					</fieldset>
				</div>

				<div class="col width-40"></div>
				<div class="clr"></div>
				<input type="hidden" name="c" value="<?php echo JRequest::getVar('c')?>" />
				<input type="hidden" name="option" value="<?php echo JRequest::getVar('option')?>" />
				<input type="hidden" name="id" value="<?php echo $row->id; ?>" />
				<input type="hidden" name="task" value="<?php echo JRequest::getVar('task')?>" />
				<input type="hidden" name="action" value="<?php echo $edit==true?'edit':'add'?>" />
				<?php echo JHTML::_( 'form.token' ); ?>
				<?php JHTML::_('behavior.calendar'); ?>
			</form>
			<?
		}

		function showRecord($rows, $page, $list = array())
		{
			?>
				<form action="index.php" method="post" name="adminForm">
					<table>
						<tr>
							<td align="left">Find <input type="text" name="keywords" /></td>
							<td align="right"><?php $field["field_name"]="event[catid]"; $field["id"]="id"; $field["name"]="name"; $field["parent"]="parent"?>
<?php echo listCategories($_POST["event"]["catid"], $field, "agenda_category", "onchange='document.adminForm.submit();'");?></td>
						</tr>
					</table>
					<table class="adminlist">
					<thead>
						<tr>
							<th width="10">
								<?php echo JText::_( 'NUM' ); ?>
							</th>
							<th width="10">
								<input type="checkbox" name="toggle" value="" onclick="checkAll(<?php echo count( $rows );?>);" />
							</th>
							<th class="title">Content</th>
<th class="title">Action</th>

						</tr>
					</thead>
					<tfoot>
						<tr>
							<td colspan="7">
								<?php echo $page->getListFooter(); ?>
							</td>
						</tr>
					</tfoot>
					<tbody>
						<?php
							$i=0; 
						if(count($rows)>=1){
							foreach($rows as $k=>$v){
								$checked 	= JHTML::_('grid.checkedout',   $v, $i );
								?>
								<tr>
									<td><?php echo $page->getRowOffset( $i ); ?></td>
									<td><?php echo $checked?></td>
									<td><?php echo substr(strip_tags($v->content), 0, 150)?></td>
<td width='10'><a href='index.php?option=com_agenda&c=event&task=edit&id=<?=$v->id?>'><img src='components/com_agenda/assets/images/edit.png'/></a></td>

								<?php 
								$i++;
							}
						}
						?>
					</tbody>
					</table>
				<input type="hidden" name="c" value="<?php echo JRequest::getVar('c')?>" />
				<input type="hidden" name="option" value="<?php echo JRequest::getVar('option')?>" />
				<input type="hidden" name="id" value="<?php echo $row->id; ?>" />
				<input type="hidden" name="task" value="<?php echo JRequest::getVar('task')?>" />
				<input type="hidden" name="boxchecked" value="0" />
				<?php echo JHTML::_( 'form.token' ); ?>
				</form>
			<?
		}

	}
?>
